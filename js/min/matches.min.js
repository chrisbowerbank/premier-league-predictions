$(function(){var n=["entry.735501007","entry.1902697499","entry.2145179791","entry.483015764","entry.1766934893","entry.2011366254","entry.446400431","entry.1567131592","entry.192213138","entry.108046031"],r=[];$.ajax({url:"https://sheets.googleapis.com/v4/spreadsheets/1Cq-moMhz7MLKnomxK5qMkIXnOdJZi2N3SMcxamjxFKw/values/A2:E1000?key=AIzaSyDXF-TsAl08BQHZUUupA-kE7BEeJ5DRpWM&majorDimension=ROWS",type:"GET",success:function(e){var i=e.values,a=e.values[0][4];$("#match-week").val(a),$(".week").text(a),console.log(i),$.each(i,function(e,a){var t={team_A:i[e][0],team_A_logo:i[e][1],team_B:i[e][2],team_B_logo:i[e][3],matchId:n[e]};r.push(t)}),console.log(r),$.each(r.reverse(),function(e,a){var t='<div class="match form-panel"><div class="matchup"><h3>'+r[e].team_A+" vs. "+r[e].team_B+'<h3></div><div class="team-grid"><div class="team-a team" data-team='+r[e].team_A+'><div class="team-logo"><img src="'+r[e].team_A_logo+'" /></div></div><div class="draw team" data-team="draw"><div class="team-logo"><img src="https://chrisbowerbank.github.io/premier-league-predictions/img/draw.png" /></div></div><div class="team-a team" data-team='+r[e].team_B+'><div class="team-logo"><img src="'+r[e].team_B_logo+'" /></div></div></div><div class="error">Make a pick to proceed</div><input type="hidden" name="'+r[e].matchId+'" class="match-pick match-'+[e]+'"></div>';$("#match-form").prepend(t)}),$(".match:first").addClass("active");var t=$(".form-panel").length,s=$(".form-panel.active").index()+1;$(".team").click(function(){$(".form-panel.active").find(".error").slideUp(),$(this).parents(".match").find(".team.active").removeClass("active"),$(this).addClass("active");var e=$(this).data("team");$(this).parents(".match").find(".match-pick").val(e);var a=$(this);setTimeout(function(){a.parents(".match").removeClass("active").next(".form-panel").addClass("active"),s=$(".form-panel.active").index()+1,$(".current-panel").text(s)},500)}),$(".total-panels").text(t),$(".current-panel").text(s),$(".prev-panel").click(function(){0<$(".form-panel.active").prev(".form-panel").length&&($(".form-panel.active").removeClass("active").prev(".form-panel").addClass("active"),s=$(".form-panel.active").index()+1,$(".current-panel").text(s),0==$(".form-panel.active").next(".form-panel").length&&$("#match-form").removeClass("review"))}),$(".next-panel").click(function(){""!==$(".form-panel.active input").val()&&0<$(".form-panel.active").next(".form-panel").length?($(".form-panel.active").find(".error").slideUp(),$(".form-panel.active").removeClass("active").next(".form-panel").addClass("active"),s=$(".form-panel.active").index()+1,$(".current-panel").text(s)):""!==$(".form-panel.active input").val()&&0==$(".form-panel.active").next(".form-panel").length?($(".form-panel.active").find(".error").slideUp(),$(".form-panel.active").removeClass("active"),$(".prev-panel").addClass("hidden"),$("#match-form").addClass("review"),$(".next-panel").addClass("submit-picks").html("<h3>Submit</h3>"),$(".review-display").removeClass("hidden"),$(".matchweek-display").addClass("hidden"),s=$(".form-panel.active").index()+1,$(".current-panel").text(t),$(".progress-bar").width("100%"),$(".submit-picks").click(function(){1==new RegExp("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,}$").test($("#matchpick-email").val())?$("#match-form").submit():$(".email-input .error").slideDown()})):$(".form-panel.active").find(".error").slideDown()}),$(".text-input input").keypress(function(e){13==e.keyCode&&$(".next-panel").click()});$("#match-form").submit(function(e){e.preventDefault(),$.ajax({url:"https://docs.google.com/forms/d/1tu32J-pGtFoLui7FNGetTK9CeCGC2AE8EOGbAoAggG0/formResponse",data:$("#match-form").serialize(),statusCode:{0:function(e){console.log("success"),$("#match-form, .match-week-display, .review-display, .form-toggle").addClass("hidden"),$("#form-success").addClass("active")},200:function(e){console.log("success"),$("#match-form, .match-week-display, .review-display, .form-toggle").addClass("hidden"),$("#form-success").addClass("active")},403:function(e){console.log("error"),alert("Oh no! something went wrong. we should check our code to make sure everything matches with Google")}}})})},error:function(e){console.log(e)}})});